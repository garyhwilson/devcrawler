{"version":3,"file":"game.js","mappings":"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","sources":["webpack://devcrawler/./src/game/Camera.js","webpack://devcrawler/./src/game/dungeon/Corridor.js","webpack://devcrawler/./src/game/dungeon/DungeonGenerator.js","webpack://devcrawler/./src/game/dungeon/Room.js","webpack://devcrawler/./src/game/dungeon/RoomColors.js","webpack://devcrawler/./src/game/grid/GridCell.js","webpack://devcrawler/./src/game/grid/GridManager.js","webpack://devcrawler/webpack/bootstrap","webpack://devcrawler/webpack/runtime/define property getters","webpack://devcrawler/webpack/runtime/hasOwnProperty shorthand","webpack://devcrawler/webpack/runtime/make namespace object","webpack://devcrawler/./src/game/index.js"],"sourcesContent":["export class Camera {\n  constructor(width, height, worldWidth, worldHeight, tileSize) {\n    this.width = width;\n    this.height = height;\n    this.worldWidth = worldWidth;\n    this.worldHeight = worldHeight;\n    this.tileSize = tileSize;\n    this.x = 0;\n    this.y = 0;\n\n    // Calculate the number of tiles that can be displayed\n    this.tilesX = Math.floor(width / tileSize);\n    this.tilesY = Math.floor(height / tileSize);\n\n    // Scroll threshold in tiles (5 tiles from edge)\n    this.scrollThreshold = 5;\n  }\n\n  // Update camera position based on target (player) position\n  follow(targetX, targetY) {\n    // Convert target position to screen space\n    const screenX = (targetX * this.tileSize) - this.x;\n    const screenY = (targetY * this.tileSize) - this.y;\n\n    // Check if target is too close to screen edges\n    if (screenX < this.scrollThreshold * this.tileSize) {\n      this.x = (targetX * this.tileSize) - (this.scrollThreshold * this.tileSize);\n    }\n    if (screenX > this.width - (this.scrollThreshold * this.tileSize)) {\n      this.x = (targetX * this.tileSize) - this.width + (this.scrollThreshold * this.tileSize);\n    }\n    if (screenY < this.scrollThreshold * this.tileSize) {\n      this.y = (targetY * this.tileSize) - (this.scrollThreshold * this.tileSize);\n    }\n    if (screenY > this.height - (this.scrollThreshold * this.tileSize)) {\n      this.y = (targetY * this.tileSize) - this.height + (this.scrollThreshold * this.tileSize);\n    }\n\n    // Clamp camera position to world bounds\n    this.x = Math.max(0, Math.min(this.x, (this.worldWidth * this.tileSize) - this.width));\n    this.y = Math.max(0, Math.min(this.y, (this.worldHeight * this.tileSize) - this.height));\n  }\n\n  // Convert world coordinates to screen coordinates\n  worldToScreen(worldX, worldY) {\n    return {\n      x: (worldX * this.tileSize) - this.x,\n      y: (worldY * this.tileSize) - this.y\n    };\n  }\n\n  // Check if a tile is visible on screen\n  isVisible(worldX, worldY) {\n    const screenPos = this.worldToScreen(worldX, worldY);\n    return screenPos.x >= -this.tileSize &&\n      screenPos.x <= this.width &&\n      screenPos.y >= -this.tileSize &&\n      screenPos.y <= this.height;\n  }\n}\n","// src/game/dungeon/Corridor.js\nexport class Corridor {\n  constructor(startX, startY, endX, endY) {\n    this.startX = startX;\n    this.startY = startY;\n    this.endX = endX;\n    this.endY = endY;\n    this.type = 'corridor';\n    this.path = [];\n    this.generatePath();\n  }\n\n  generatePath() {\n    this.path = [];\n    let currentX = this.startX;\n    let currentY = this.startY;\n\n    // Add starting point\n    this.path.push({ x: currentX, y: currentY });\n\n    const horizontalFirst = Math.random() < 0.5;\n\n    if (horizontalFirst) {\n      // Go horizontal first\n      while (currentX !== this.endX) {\n        currentX += currentX < this.endX ? 1 : -1;\n        this.path.push({ x: currentX, y: currentY });\n      }\n      // Then vertical\n      while (currentY !== this.endY) {\n        currentY += currentY < this.endY ? 1 : -1;\n        this.path.push({ x: currentX, y: currentY });\n      }\n    } else {\n      // Go vertical first\n      while (currentY !== this.endY) {\n        currentY += currentY < this.endY ? 1 : -1;\n        this.path.push({ x: currentX, y: currentY });\n      }\n      // Then horizontal\n      while (currentX !== this.endX) {\n        currentX += currentX < this.endX ? 1 : -1;\n        this.path.push({ x: currentX, y: currentY });\n      }\n    }\n  }\n}\n","// src/game/dungeon/DungeonGenerator.js\n\nimport { Room } from './Room.js';\nimport { Corridor } from './Corridor.js';\n\nexport class DungeonGenerator {\n  constructor(width, height) {\n    this.width = width;\n    this.height = height;\n    this.rooms = [];\n    this.corridors = [];\n    this.grid = Array(height).fill().map(() => Array(width).fill(0));\n  }\n\n  generate() {\n    this.rooms = [];\n    this.corridors = [];\n    this.grid = Array(this.height).fill().map(() => Array(this.width).fill(0));\n\n    this.generateRooms();\n    this.connectRooms();\n    this.applyToGrid();\n\n    return {\n      grid: this.grid,\n      rooms: this.rooms,\n      corridors: this.corridors\n    };\n  }\n\n  generateRooms(attempts = 50) {\n    for (let i = 0; i < attempts; i++) {\n      const minSize = 5;\n      const maxSize = 10;\n\n      const width = minSize + Math.floor(Math.random() * (maxSize - minSize));\n      const height = minSize + Math.floor(Math.random() * (maxSize - minSize));\n\n      const x = Math.floor(Math.random() * (this.width - width - 2)) + 1;\n      const y = Math.floor(Math.random() * (this.height - height - 2)) + 1;\n\n      const newRoom = new Room(x, y, width, height);\n\n      let overlaps = false;\n      for (const room of this.rooms) {\n        if (newRoom.intersects(room, 2)) {\n          overlaps = true;\n          break;\n        }\n      }\n\n      if (!overlaps) {\n        this.rooms.push(newRoom);\n      }\n    }\n  }\n\n  connectRooms() {\n    const sortedRooms = [...this.rooms].sort((a, b) => a.x - b.x);\n\n    for (let i = 0; i < sortedRooms.length - 1; i++) {\n      const roomA = sortedRooms[i];\n      const roomB = sortedRooms[i + 1];\n\n      const connection = this.findBestConnection(roomA, roomB);\n      if (!connection) continue;\n\n      const { corridor, doorPoints } = connection;\n\n      // Add corridor and doors\n      this.corridors.push(corridor);\n      doorPoints.forEach(point => {\n        this.grid[point.y][point.x] = 2; // door\n      });\n    }\n  }\n\n  findBestConnection(roomA, roomB) {\n    // Try different connection strategies\n    const strategies = [\n      { dx: 0, dy: 0 },    // Direct\n      { dx: 0, dy: 1 },    // Offset up\n      { dx: 0, dy: -1 },   // Offset down\n      { dx: 1, dy: 0 },    // Offset right\n      { dx: -1, dy: 0 }    // Offset left\n    ];\n\n    for (const { dx, dy } of strategies) {\n      // Find potential connection points\n      const startPoint = this.findConnectionPoint(roomA, roomB, dx, dy);\n      const endPoint = this.findConnectionPoint(roomB, roomA, -dx, -dy);\n\n      // Create and validate corridor\n      const corridor = new Corridor(startPoint.x, startPoint.y, endPoint.x, endPoint.y);\n\n      // Remove room intersections\n      corridor.path = corridor.path.filter(point =>\n        !this.isPointInAnyRoom(point.x, point.y));\n\n      // Validate corridor\n      if (corridor.path.length >= 4 && this.isValidCorridor(corridor)) {\n        // Find door placement points\n        const doorPoints = this.getDoorPoints(corridor, roomA, roomB);\n        if (doorPoints.length === 2) { // Ensure exactly two doors\n          return { corridor, doorPoints };\n        }\n      }\n    }\n    return null;\n  }\n\n  findConnectionPoint(room, targetRoom, offsetX, offsetY) {\n    const roomCenter = room.getCenter();\n    const targetCenter = targetRoom.getCenter();\n\n    // Determine which edge to use based on relative position\n    let x, y;\n\n    if (roomCenter.x < targetCenter.x) {\n      x = room.x + room.width - 1; // Right edge\n    } else {\n      x = room.x; // Left edge\n    }\n\n    if (roomCenter.y < targetCenter.y) {\n      y = room.y + room.height - 1; // Bottom edge\n    } else {\n      y = room.y; // Top edge\n    }\n\n    // Apply offset\n    x += offsetX;\n    y += offsetY;\n\n    return { x, y };\n  }\n\n  isValidCorridor(corridor) {\n    // Check minimum length\n    if (corridor.path.length < 4) return false;\n\n    // Check for nearby doors or other corridors\n    for (const point of corridor.path) {\n      const neighbors = this.getAdjacentPoints(point);\n      for (const neighbor of neighbors) {\n        // Check if neighbor is a door or part of another corridor\n        if (this.grid[neighbor.y][neighbor.x] === 2) return false;\n      }\n    }\n\n    return true;\n  }\n\n  findDoorPlacementPoints(corridor) {\n    const doorPoints = [];\n\n    // Check start of corridor\n    const startSegment = corridor.path.slice(0, 3);\n    const validStart = this.isValidDoorPlacement(startSegment[1], corridor);\n    if (validStart) {\n      doorPoints.push(startSegment[1]);\n    }\n\n    // Check end of corridor\n    const endSegment = corridor.path.slice(-3);\n    const validEnd = this.isValidDoorPlacement(endSegment[1], corridor);\n    if (validEnd) {\n      doorPoints.push(endSegment[1]);\n    }\n\n    return doorPoints;\n  }\n\n  findClosestDoorPoint(roomA, roomB) {\n    // Find the edge of roomA that's closest to roomB\n    const centerA = roomA.getCenter();\n    const centerB = roomB.getCenter();\n\n    let x, y;\n\n    if (centerA.x < centerB.x) {\n      x = roomA.x + roomA.width - 1; // Right edge\n    } else {\n      x = roomA.x; // Left edge\n    }\n\n    if (centerA.y < centerB.y) {\n      y = roomA.y + roomA.height - 1; // Bottom edge\n    } else {\n      y = roomA.y; // Top edge\n    }\n\n    return { x, y };\n  }\n\n  isPointInAnyRoom(x, y) {\n    return this.rooms.some(room =>\n      x >= room.x && x < room.x + room.width &&\n      y >= room.y && y < room.y + room.height\n    );\n  }\n\n  getAdjacentPoints(point) {\n    const neighbors = [];\n    const deltas = [[-1, 0], [1, 0], [0, -1], [0, 1]];\n\n    for (const [dx, dy] of deltas) {\n      const x = point.x + dx;\n      const y = point.y + dy;\n      if (this.isInBounds(x, y)) {\n        neighbors.push({ x, y });\n      }\n    }\n\n    return neighbors;\n  }\n\n  getDoorPoints(corridor, roomA, roomB) {\n    const doorPoints = [];\n\n    // Check first and last points of corridor\n    const start = corridor.path[0];\n    const end = corridor.path[corridor.path.length - 1];\n\n    // Only add door points that are actually connecting to rooms\n    if (this.isAdjacentToRoom(start, roomA)) doorPoints.push(start);\n    if (this.isAdjacentToRoom(end, roomB)) doorPoints.push(end);\n\n    return doorPoints;\n  }\n\n  isAdjacentToRoom(point, room) {\n    return point.x >= room.x - 1 &&\n      point.x <= room.x + room.width &&\n      point.y >= room.y - 1 &&\n      point.y <= room.y + room.height;\n  }\n\n  isValidDoorPlacement(point, corridor) {\n    // Check if there's enough space around the door\n    const neighboringCells = [\n      { x: point.x - 1, y: point.y },\n      { x: point.x + 1, y: point.y },\n      { x: point.x, y: point.y - 1 },\n      { x: point.x, y: point.y + 1 }\n    ];\n\n    // Count how many corridor cells are adjacent\n    const corridorNeighbors = neighboringCells.filter(cell =>\n      corridor.path.some(p => p.x === cell.x && p.y === cell.y)\n    );\n\n    // Only place door if it connects exactly two spaces\n    // (one corridor side and one room side)\n    return corridorNeighbors.length === 1;\n  }\n\n  assignRoomTypes() {\n    // Sort rooms by size\n    const sortedRooms = [...this.rooms].sort((a, b) =>\n      (b.width * b.height) - (a.width * a.height));\n\n    // Assign types based on size and position\n    sortedRooms[0].setType(RoomType.LARGE_HALL);\n\n    // Find the room closest to top-left for entrance\n    const topLeftRoom = this.rooms.reduce((closest, room) => {\n      const distance = Math.sqrt(room.x * room.x + room.y * room.y);\n      if (!closest || distance < Math.sqrt(closest.x * closest.x + closest.y * closest.y)) {\n        return room;\n      }\n      return closest;\n    });\n    topLeftRoom.setType(RoomType.ENTRANCE);\n\n    // Find the room farthest from entrance for boss\n    const farthestRoom = this.rooms.reduce((farthest, room) => {\n      const distance = Math.sqrt(\n        Math.pow(room.x - topLeftRoom.x, 2) +\n        Math.pow(room.y - topLeftRoom.y, 2)\n      );\n      if (!farthest || distance > Math.sqrt(\n        Math.pow(farthest.x - topLeftRoom.x, 2) +\n        Math.pow(farthest.y - topLeftRoom.y, 2)\n      )) {\n        return room;\n      }\n      return farthest;\n    });\n    farthestRoom.setType(RoomType.BOSS);\n\n    // Assign remaining rooms randomly\n    const remainingTypes = [RoomType.STORAGE, RoomType.TREASURE, RoomType.STANDARD];\n    this.rooms.forEach(room => {\n      if (!room.type || room.type === RoomType.STANDARD) {\n        const randomType = remainingTypes[Math.floor(Math.random() * remainingTypes.length)];\n        room.setType(randomType);\n      }\n    });\n  }\n\n  applyToGrid() {\n    // First pass: Apply rooms\n    for (const room of this.rooms) {\n      for (let y = room.y; y < room.y + room.height; y++) {\n        for (let x = room.x; x < room.x + room.width; x++) {\n          if (this.isInBounds(x, y)) {\n            this.grid[y][x] = 1; // floor\n          }\n        }\n      }\n    }\n\n    // Second pass: Apply corridors\n    for (const corridor of this.corridors) {\n      for (const point of corridor.path) {\n        if (this.isInBounds(point.x, point.y)) {\n          this.grid[point.y][point.x] = 1; // floor\n        }\n      }\n    }\n\n    // Third pass: Add walls\n    const tempGrid = this.grid.map(row => [...row]);\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        if (tempGrid[y][x] === 0) { // Empty space\n          if (this.hasAdjacentFloor(x, y)) {\n            this.grid[y][x] = 3; // wall\n          }\n        }\n      }\n    }\n\n    // Fourth pass: Place doors\n    console.log('Attempting to place doors...');\n    this.placeDoors();\n  }\n\n  placeDoors() {\n    for (const corridor of this.corridors) {\n      let startSection = corridor.path.slice(1, 4);\n      let endSection = corridor.path.slice(-4, -1);\n\n      for (const point of [...startSection, ...endSection]) {\n        if (this.shouldPlaceDoor(point.x, point.y)) {\n          this.grid[point.y][point.x] = 2; // door tile value\n        }\n      }\n    }\n  }\n\n  shouldPlaceDoor(x, y) {\n    if (!this.isInBounds(x, y)) return false;\n\n    // The point itself must be a floor tile\n    if (this.grid[y][x] !== 1) return false;\n\n    // Check horizontal door possibility (walls on north and south)\n    const horizontalDoor =\n      this.isInBounds(x, y - 1) && this.grid[y - 1][x] === 3 && // Wall above\n      this.isInBounds(x, y + 1) && this.grid[y + 1][x] === 3 && // Wall below\n      this.isInBounds(x - 1, y) && this.grid[y][x - 1] === 1 && // Floor left\n      this.isInBounds(x + 1, y) && this.grid[y][x + 1] === 1;   // Floor right\n\n    // Check vertical door possibility (walls on east and west)\n    const verticalDoor =\n      this.isInBounds(x - 1, y) && this.grid[y][x - 1] === 3 && // Wall left\n      this.isInBounds(x + 1, y) && this.grid[y][x + 1] === 3 && // Wall right\n      this.isInBounds(x, y - 1) && this.grid[y - 1][x] === 1 && // Floor above\n      this.isInBounds(x, y + 1) && this.grid[y + 1][x] === 1;   // Floor below\n\n    return horizontalDoor || verticalDoor;\n  }\n\n  hasAdjacentFloor(x, y) {\n    for (let dy = -1; dy <= 1; dy++) {\n      for (let dx = -1; dx <= 1; dx++) {\n        if (dx === 0 && dy === 0) continue;\n        const ny = y + dy;\n        const nx = x + dx;\n        if (this.isInBounds(nx, ny) && this.grid[ny][nx] === 1) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  isInBounds(x, y) {\n    return x >= 0 && x < this.width && y >= 0 && y < this.height;\n  }\n}\n","// src/game/dungeon/Room.js\n\nexport const RoomType = {\n  STANDARD: 'standard',\n  ENTRANCE: 'entrance',\n  LARGE_HALL: 'largeHall',\n  BOSS: 'boss',\n  STORAGE: 'storage',\n  TREASURE: 'treasure'\n};\n\nexport class Room {\n  constructor(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.doors = [];\n    this.type = RoomType.STANDARD;\n    this.features = new Map();\n\n    // Additional properties for special rooms\n    this.isLocked = false;\n    this.requiredKey = null;\n    this.contents = new Set(); // For items, monsters, etc.\n  }\n\n  intersects(other, padding = 0) {\n    return !(this.x + this.width + padding < other.x ||\n      other.x + other.width + padding < this.x ||\n      this.y + this.height + padding < other.y ||\n      other.y + other.height + padding < this.y);\n  }\n\n  getCenter() {\n    return {\n      x: Math.floor(this.x + this.width / 2),\n      y: Math.floor(this.y + this.height / 2)\n    };\n  }\n\n  getBounds() {\n    return {\n      left: this.x,\n      right: this.x + this.width,\n      top: this.y,\n      bottom: this.y + this.height\n    };\n  }\n\n  addDoor(x, y, type = 'normal') {\n    this.doors.push({ x, y, type });\n  }\n\n  // Get minimum size requirements for each room type\n  static getMinSize(type) {\n    switch (type) {\n      case RoomType.LARGE_HALL:\n        return { width: 12, height: 12 };\n      case RoomType.BOSS:\n        return { width: 15, height: 15 };\n      case RoomType.STORAGE:\n        return { width: 5, height: 5 };\n      case RoomType.TREASURE:\n        return { width: 7, height: 7 };\n      case RoomType.ENTRANCE:\n        return { width: 8, height: 8 };\n      default:\n        return { width: 6, height: 6 };\n    }\n  }\n\n  setType(type) {\n    this.type = type;\n    // Apply type-specific properties\n    switch (type) {\n      case RoomType.TREASURE:\n        this.isLocked = true;\n        this.requiredKey = 'treasure_key';\n        break;\n      case RoomType.BOSS:\n        this.isLocked = true;\n        break;\n      case RoomType.ENTRANCE:\n        // Entrance should always be accessible\n        this.isLocked = false;\n        break;\n    }\n    return this;\n  }\n\n  // Generate a room of specific type\n  static generate(type, availableWidth, availableHeight, padding = 2) {\n    const minSize = Room.getMinSize(type);\n    let width, height;\n\n    switch (type) {\n      case RoomType.LARGE_HALL:\n        width = minSize.width + Math.floor(Math.random() * 4);\n        height = minSize.height + Math.floor(Math.random() * 4);\n        break;\n      case RoomType.BOSS:\n        width = minSize.width + Math.floor(Math.random() * 5);\n        height = minSize.height + Math.floor(Math.random() * 5);\n        break;\n      case RoomType.STORAGE:\n        width = minSize.width + Math.floor(Math.random() * 2);\n        height = minSize.height + Math.floor(Math.random() * 2);\n        break;\n      case RoomType.TREASURE:\n        width = minSize.width + Math.floor(Math.random() * 3);\n        height = minSize.height + Math.floor(Math.random() * 3);\n        break;\n      case RoomType.ENTRANCE:\n        width = minSize.width;\n        height = minSize.height;\n        break;\n      default: // STANDARD\n        width = minSize.width + Math.floor(Math.random() * 4);\n        height = minSize.height + Math.floor(Math.random() * 4);\n    }\n\n    // Ensure room fits in available space\n    width = Math.min(width, availableWidth - padding * 2);\n    height = Math.min(height, availableHeight - padding * 2);\n\n    // Position room\n    const x = padding + Math.floor(Math.random() * (availableWidth - width - padding * 2));\n    const y = padding + Math.floor(Math.random() * (availableHeight - height - padding * 2));\n\n    const room = new Room(x, y, width, height);\n    room.setType(type);\n    return room;\n  }\n}\n","// src/game/dungeon/RoomColors.js\n\nimport { RoomType } from './Room.js';\nexport const RoomColors = {\n  [RoomType.STANDARD]: '#444',    // Standard gray\n  [RoomType.ENTRANCE]: '#4a9',    // Teal\n  [RoomType.LARGE_HALL]: '#66a',  // Purple-blue\n  [RoomType.BOSS]: '#a44',        // Dark red\n  [RoomType.STORAGE]: '#974',     // Tan\n  [RoomType.TREASURE]: '#aa4',    // Gold\n  'corridor': '#335',             // Dark blue-gray\n  'wall': '#666',                 // Light gray\n  'door': {\n    'open': '#4a2',             // Green\n    'closed': '#8b4513'         // Brown\n  }\n};\n","// src/game/grid/GridCell.js\n\nexport class GridCell {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n    this.type = 'floor';\n    this.walkable = true;\n    this.transparent = true;\n    this.visible = false;\n    this.explored = false;\n    this.entities = new Set();\n    this.properties = new Map();\n    this.isDoor = false;\n    this.isOpen = false;\n  }\n\n  // Entity management\n  addEntity(entity) {\n    this.entities.add(entity);\n    return this;\n  }\n\n  removeEntity(entity) {\n    this.entities.delete(entity);\n    return this;\n  }\n\n  hasBlockingEntity() {\n    return Array.from(this.entities).some(entity => entity.blocking);\n  }\n\n  // Property management\n  setProperty(key, value) {\n    this.properties.set(key, value);\n    return this;\n  }\n\n  getProperty(key) {\n    return this.properties.get(key);\n  }\n\n  hasProperty(key) {\n    return this.properties.has(key);\n  }\n\n  // Cell type management\n  setType(type) {\n    this.type = type;\n\n    switch (type) {\n      case 'wall':\n        this.walkable = false;\n        this.transparent = false;\n        this.isDoor = false;\n        break;\n      case 'door':\n        this.isDoor = true;\n        this.isOpen = Math.random() < 0.2; // 20% chance to start open\n        this.walkable = this.isOpen;\n        this.transparent = this.isOpen;\n        break;\n      case 'floor':\n        this.walkable = true;\n        this.transparent = true;\n        this.isDoor = false;\n        break;\n      default:\n        console.warn(`Unknown cell type: ${type}`);\n    }\n  }\n\n  toggleDoor() {\n    if (!this.isDoor) return false;\n\n    this.isOpen = !this.isOpen;\n    this.walkable = this.isOpen;\n    this.transparent = this.isOpen;\n    return true;\n  }\n}\n","// src/game/grid/GridManager.js\n\nimport { GridCell } from './GridCell.js';\n\nexport class GridManager {\n  constructor(width, height, tileSize = 32) {\n    this.width = width;\n    this.height = height;\n    this.tileSize = tileSize;\n    this.grid = this.createGrid();\n  }\n\n  createGrid() {\n    const grid = new Array(this.height);\n    for (let y = 0; y < this.height; y++) {\n      grid[y] = new Array(this.width);\n      for (let x = 0; x < this.width; x++) {\n        grid[y][x] = new GridCell(x, y);\n      }\n    }\n    return grid;\n  }\n\n  isInBounds(x, y) {\n    return x >= 0 && x < this.width && y >= 0 && y < this.height;\n  }\n\n  getCell(x, y) {\n    if (!this.isInBounds(x, y)) return null;\n    return this.grid[y][x];\n  }\n\n  // Movement validation\n  canMoveTo(x, y) {\n    const cell = this.getCell(x, y);\n    if (!cell) return false;\n\n    // Check if it's a door and it's closed\n    if (cell.isDoor && !cell.isOpen) {\n      return false;\n    }\n\n    return cell.walkable && !cell.hasBlockingEntity();\n  }\n\n  // Coordinate conversion\n  gridToScreen(gridX, gridY) {\n    return {\n      x: gridX * this.tileSize,\n      y: gridY * this.tileSize\n    };\n  }\n\n  screenToGrid(screenX, screenY) {\n    return {\n      x: Math.floor(screenX / this.tileSize),\n      y: Math.floor(screenY / this.tileSize)\n    };\n  }\n\n  // Get all neighbors of a cell\n  getNeighbors(x, y, includeDiagonals = false) {\n    const neighbors = [];\n    const directions = [\n      { x: 0, y: -1 },  // Up\n      { x: 1, y: 0 },   // Right\n      { x: 0, y: 1 },   // Down\n      { x: -1, y: 0 }   // Left\n    ];\n\n    if (includeDiagonals) {\n      directions.push(\n        { x: 1, y: -1 },  // Up-Right\n        { x: 1, y: 1 },   // Down-Right\n        { x: -1, y: 1 },  // Down-Left\n        { x: -1, y: -1 }  // Up-Left\n      );\n    }\n\n    for (const dir of directions) {\n      const newX = x + dir.x;\n      const newY = y + dir.y;\n      const cell = this.getCell(newX, newY);\n      if (cell) neighbors.push(cell);\n    }\n\n    return neighbors;\n  }\n\n  // Get walkable neighbors (for pathfinding)\n  getWalkableNeighbors(x, y, includeDiagonals = false) {\n    return this.getNeighbors(x, y, includeDiagonals)\n      .filter(cell => this.canMoveTo(cell.x, cell.y));\n  }\n\n  // Line of sight check\n  hasLineOfSight(x1, y1, x2, y2) {\n    // Bresenham's line algorithm\n    const dx = Math.abs(x2 - x1);\n    const dy = Math.abs(y2 - y1);\n    const sx = x1 < x2 ? 1 : -1;\n    const sy = y1 < y2 ? 1 : -1;\n    let err = dx - dy;\n\n    let x = x1;\n    let y = y1;\n\n    while (true) {\n      if (x === x2 && y === y2) return true;\n\n      const cell = this.getCell(x, y);\n      if (!cell || !cell.transparent) return false;\n\n      const e2 = 2 * err;\n      if (e2 > -dy) {\n        err -= dy;\n        x += sx;\n      }\n      if (e2 < dx) {\n        err += dx;\n        y += sy;\n      }\n    }\n  }\n\n  // Get all cells within a certain range\n  getCellsInRange(centerX, centerY, range) {\n    const cells = [];\n    for (let y = centerY - range; y <= centerY + range; y++) {\n      for (let x = centerX - range; x <= centerX + range; x++) {\n        const cell = this.getCell(x, y);\n        if (cell) {\n          const distance = Math.sqrt(\n            Math.pow(x - centerX, 2) +\n            Math.pow(y - centerY, 2)\n          );\n          if (distance <= range) {\n            cells.push(cell);\n          }\n        }\n      }\n    }\n    return cells;\n  }\n\n  resetVisibility() {\n    for (let y = 0; y < this.height; y++) {\n      for (let x = 0; x < this.width; x++) {\n        this.grid[y][x].visible = false;\n      }\n    }\n  }\n\n  clear() {\n    this.grid = this.createGrid();\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// src/game/index.js\n\nimport { GridManager } from './grid/GridManager.js';\nimport { DungeonGenerator } from './dungeon/DungeonGenerator.js';\nimport { Camera } from './Camera.js';\nimport { RoomType } from './dungeon/Room.js';\nimport { RoomColors } from './dungeon/RoomColors.js';\n\nclass GameManager {\n  constructor() {\n    console.log('GameManager initializing...');\n\n    try {\n      // Initialize canvas\n      this.canvas = document.getElementById('gameCanvas');\n      if (!this.canvas) {\n        throw new Error('Canvas element not found');\n      }\n\n      this.ctx = this.canvas.getContext('2d');\n      if (!this.ctx) {\n        throw new Error('Could not get 2D context');\n      }\n\n      // Constants\n      const GRID_WIDTH = 50;  // World size\n      const GRID_HEIGHT = 50;\n      const TILE_SIZE = 16;\n\n      // Set fixed canvas size (won't scale with window)\n      this.canvas.width = 800;   // Show 50 tiles at 16px each\n      this.canvas.height = 600;  // Show 37.5 tiles vertically\n\n      // Initialize camera\n      this.camera = new Camera(\n        this.canvas.width,\n        this.canvas.height,\n        GRID_WIDTH,\n        GRID_HEIGHT,\n        TILE_SIZE\n      );\n\n      // Initial canvas setup\n      this.ctx.imageSmoothingEnabled = false;\n\n      // Create grid system\n      this.gridManager = new GridManager(GRID_WIDTH, GRID_HEIGHT, TILE_SIZE);\n\n      // Create dungeon generator\n      this.dungeonGenerator = new DungeonGenerator(GRID_WIDTH, GRID_HEIGHT);\n\n      // Initialize room type tracking\n      this.roomTypes = new Map(); // Stores coordinates -> room type\n\n      // Set up game state\n      this.lastFrameTime = 0;\n      this.frameCount = 0;\n\n      // Player state\n      this.playerPos = { x: 0, y: 0 };\n      this.playerFacing = { x: 0, y: -1 }; // Initially facing north\n\n      // Generate initial dungeon and place player\n      this.generateNewDungeon();\n\n      // Bind event handlers\n      this.handleKeyDown = this.handleKeyDown.bind(this);\n\n      // Add key event listeners\n      window.addEventListener('keydown', (event) => {\n        if (event.code === 'Space') {\n          this.generateNewDungeon();\n          event.preventDefault();\n        } else {\n          this.handleKeyDown(event);\n        }\n      });\n\n      // Add legend\n      this.addLegend();\n\n      // Start game loop\n      console.log('Starting game loop...');\n      this.gameLoop(0);\n\n      // Hide loading screen\n      const loadingScreen = document.getElementById('loadingScreen');\n      if (loadingScreen) {\n        loadingScreen.classList.add('hidden');\n      }\n\n      // Add instructions\n      this.addInstructions();\n\n    } catch (error) {\n      console.error('Game initialization error:', error);\n      throw error;\n    }\n  }\n\n  addLegend() {\n    const legend = document.createElement('div');\n    legend.style.position = 'absolute';\n    legend.style.top = '10px';\n    legend.style.right = '10px';\n    legend.style.color = 'white';\n    legend.style.fontFamily = 'monospace';\n    legend.style.fontSize = '14px';\n    legend.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';\n    legend.style.padding = '10px';\n    legend.style.borderRadius = '5px';\n\n    let legendHTML = '<div style=\"text-align: left; font-weight: bold;\">Room Types:</div>';\n\n    // Add each room type to the legend\n    Object.entries(RoomType).forEach(([key, value]) => {\n      const color = RoomColors[value];\n      legendHTML += `\n          <div style=\"display: flex; align-items: center; margin: 5px 0;\">\n              <div style=\"width: 20px; height: 20px; background-color: ${color}; margin-right: 10px; border: 1px solid #666;\"></div>\n              <span>${key.charAt(0) + key.slice(1).toLowerCase().replace('_', ' ')}</span>\n          </div>`;\n    });\n\n    // Add corridor\n    legendHTML += `\n      <div style=\"display: flex; align-items: center; margin: 5px 0;\">\n          <div style=\"width: 20px; height: 20px; background-color: ${RoomColors.corridor}; margin-right: 10px; border: 1px solid #666;\"></div>\n          <span>Corridor</span>\n      </div>`;\n\n    // Add doors\n    legendHTML += `\n      <div style=\"display: flex; align-items: center; margin: 5px 0;\">\n          <div style=\"width: 20px; height: 20px; background-color: ${RoomColors.door.closed}; margin-right: 10px; border: 1px solid #666;\"></div>\n          <span>Door (Closed)</span>\n      </div>\n      <div style=\"display: flex; align-items: center; margin: 5px 0;\">\n          <div style=\"width: 20px; height: 20px; background-color: ${RoomColors.door.open}; margin-right: 10px; border: 1px solid #666;\"></div>\n          <span>Door (Open)</span>\n      </div>`;\n\n    legend.innerHTML = legendHTML;\n    document.getElementById('gameContainer').appendChild(legend);\n  }\n\n  generateNewDungeon() {\n    /// Clear existing room type tracking\n    this.roomTypes.clear();\n\n    // Generate new dungeon layout\n    const dungeon = this.dungeonGenerator.generate();\n\n    // Store room types for each cell\n    for (const room of dungeon.rooms) {\n      for (let y = room.y; y < room.y + room.height; y++) {\n        for (let x = room.x; x < room.x + room.width; x++) {\n          this.roomTypes.set(`${x},${y}`, room.type);\n        }\n      }\n    }\n\n    // Store corridor locations\n    for (const corridor of dungeon.corridors) {\n      for (const point of corridor.path) {\n        this.roomTypes.set(`${point.x},${point.y}`, 'corridor');\n      }\n    }\n\n    // Clear existing grid\n    this.gridManager.clear();\n\n    // Apply dungeon to grid\n    for (let y = 0; y < dungeon.grid.length; y++) {\n      for (let x = 0; x < dungeon.grid[y].length; x++) {\n        const cell = this.gridManager.getCell(x, y);\n        switch (dungeon.grid[y][x]) {\n          case 0: // Empty\n            cell.setType('wall');\n            cell.walkable = false;\n            cell.transparent = false;\n            break;\n          case 1: // Floor\n            cell.setType('floor');\n            cell.walkable = true;\n            cell.transparent = true;\n            break;\n          case 2: // Door\n            cell.setType('door');\n            cell.walkable = true;\n            cell.transparent = false;\n            break;\n          case 3: // Wall\n            cell.setType('wall');\n            cell.walkable = false;\n            cell.transparent = false;\n            break;\n        }\n      }\n    }\n\n    // Place player in a valid position\n    this.placePlayerInDungeon();\n\n    // Reset camera to follow player\n    this.camera.follow(this.playerPos.x, this.playerPos.y);\n\n    // Update initial visibility\n    this.updateVisibility();\n  }\n\n  placePlayerInDungeon() {\n    // Find first walkable cell\n    for (let y = 0; y < this.gridManager.height; y++) {\n      for (let x = 0; x < this.gridManager.width; x++) {\n        if (this.gridManager.canMoveTo(x, y)) {\n          this.playerPos = { x, y };\n          return;\n        }\n      }\n    }\n  }\n\n  updateVisibility() {\n    this.gridManager.resetVisibility();\n    const visibleCells = this.gridManager.getCellsInRange(this.playerPos.x, this.playerPos.y, 5);\n    for (const cell of visibleCells) {\n      if (this.gridManager.hasLineOfSight(this.playerPos.x, this.playerPos.y, cell.x, cell.y)) {\n        cell.visible = true;\n        cell.explored = true;\n      }\n    }\n  }\n\n  addInstructions() {\n    const instructions = document.createElement('div');\n    instructions.style.position = 'absolute';\n    instructions.style.top = '10px';\n    instructions.style.left = '10px';\n    instructions.style.color = 'white';\n    instructions.style.fontFamily = 'monospace';\n    instructions.style.fontSize = '14px';\n    instructions.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';\n    instructions.style.padding = '10px';\n    instructions.style.borderRadius = '5px';\n    instructions.innerHTML = 'Arrow Keys: Move<br>E: Open/Close Door<br>Space: Generate New Dungeon';\n    document.getElementById('gameContainer').appendChild(instructions);\n  }\n\n  handleKeyDown(event) {\n    if (event.code === 'KeyE') {\n      this.tryToggleDoorInFacingDirection();\n      event.preventDefault();\n      return;\n    }\n\n    let newX = this.playerPos.x;\n    let newY = this.playerPos.y;\n    let newFacingX = 0;\n    let newFacingY = 0;\n\n    // Determine facing direction based on key\n    switch (event.code) {\n      case 'ArrowUp':\n        newY--;\n        newFacingX = 0;\n        newFacingY = -1;\n        break;\n      case 'ArrowDown':\n        newY++;\n        newFacingX = 0;\n        newFacingY = 1;\n        break;\n      case 'ArrowLeft':\n        newX--;\n        newFacingX = -1;\n        newFacingY = 0;\n        break;\n      case 'ArrowRight':\n        newX++;\n        newFacingX = 1;\n        newFacingY = 0;\n        break;\n      default:\n        return;\n    }\n\n    // Always update facing direction\n    this.playerFacing.x = newFacingX;\n    this.playerFacing.y = newFacingY;\n\n    // Attempt movement if possible\n    if (this.gridManager.canMoveTo(newX, newY)) {\n      this.playerPos.x = newX;\n      this.playerPos.y = newY;\n      this.camera.follow(this.playerPos.x, this.playerPos.y);\n      this.updateVisibility();\n    }\n\n    event.preventDefault();\n  }\n\n  tryToggleDoorInFacingDirection() {\n    const facingX = this.playerPos.x + this.playerFacing.x;\n    const facingY = this.playerPos.y + this.playerFacing.y;\n\n    const facingCell = this.gridManager.getCell(facingX, facingY);\n    if (facingCell && facingCell.isDoor) {\n      if (facingCell.toggleDoor()) {\n        this.updateVisibility();\n        return true;\n      }\n    }\n    return false;\n  }\n\n\n  renderGrid() {\n    const { width, height, tileSize } = this.gridManager;\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        if (!this.camera.isVisible(x, y)) continue;\n\n        const cell = this.gridManager.getCell(x, y);\n        if (!cell.explored) continue;\n\n        const screenPos = this.camera.worldToScreen(x, y);\n        let fillColor = '#333';\n\n        if (!cell.visible) {\n          fillColor = '#1a1a1a';\n        } else {\n          const roomType = this.roomTypes.get(`${x},${y}`);\n          switch (cell.type) {\n            case 'wall':\n              fillColor = RoomColors.wall;\n              break;\n            case 'door':\n              fillColor = cell.isOpen ? RoomColors.door.open : RoomColors.door.closed;\n              break;\n            case 'floor':\n              if (roomType === 'corridor') {\n                fillColor = RoomColors.corridor;\n              } else {\n                fillColor = RoomColors[roomType] || RoomColors[RoomType.STANDARD];\n              }\n              break;\n          }\n        }\n\n        this.ctx.fillStyle = fillColor;\n        this.ctx.fillRect(screenPos.x, screenPos.y, tileSize, tileSize);\n\n        if (cell.visible) {\n          this.ctx.strokeStyle = '#222';\n          this.ctx.strokeRect(screenPos.x, screenPos.y, tileSize, tileSize);\n        }\n      }\n    }\n  }\n\n  renderPlayer() {\n    const screenPos = this.camera.worldToScreen(this.playerPos.x, this.playerPos.y);\n    const tileSize = this.gridManager.tileSize;\n\n    // Draw player base\n    this.ctx.fillStyle = '#ff0';\n    this.ctx.fillRect(\n      screenPos.x + 2,\n      screenPos.y + 2,\n      tileSize - 4,\n      tileSize - 4\n    );\n\n    // Draw direction indicator\n    this.ctx.fillStyle = '#f00';\n    const indicatorSize = tileSize / 3;\n    const centerX = screenPos.x + tileSize / 2;\n    const centerY = screenPos.y + tileSize / 2;\n\n    const indicatorX = centerX + (this.playerFacing.x * (tileSize / 4));\n    const indicatorY = centerY + (this.playerFacing.y * (tileSize / 4));\n\n    this.ctx.beginPath();\n    this.ctx.arc(indicatorX, indicatorY, indicatorSize / 2, 0, Math.PI * 2);\n    this.ctx.fill();\n  }\n\n  gameLoop(timestamp) {\n    try {\n      const deltaTime = timestamp - this.lastFrameTime;\n      this.lastFrameTime = timestamp;\n\n      this.ctx.fillStyle = '#000';\n      this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n      this.renderGrid();\n      this.renderPlayer();\n\n      this.ctx.fillStyle = '#fff';\n      this.ctx.font = '12px monospace';\n      this.ctx.fillText(`FPS: ${Math.round(1000 / deltaTime)}`, 10, this.canvas.height - 20);\n      this.ctx.fillText(`Pos: (${this.playerPos.x}, ${this.playerPos.y})`, 10, this.canvas.height - 8);\n\n      this.frameCount++;\n      requestAnimationFrame(this.gameLoop.bind(this));\n    } catch (error) {\n      console.error('Game loop error:', error);\n      throw error;\n    }\n  }\n}\n\n// Initialize game when the window loads\nconsole.log('Game script loaded, waiting for window load');\nwindow.addEventListener('load', () => {\n  console.log('Window loaded, initializing game');\n  try {\n    window.game = new GameManager();\n  } catch (error) {\n    console.error('Failed to initialize game:', error);\n  }\n});\n\nexport default GameManager;\n"],"names":["Camera","width","height","worldWidth","worldHeight","tileSize","_classCallCheck","x","y","tilesX","Math","floor","tilesY","scrollThreshold","_createClass","key","value","follow","targetX","targetY","screenX","screenY","max","min","worldToScreen","worldX","worldY","isVisible","screenPos","Corridor","startX","startY","endX","endY","type","path","generatePath","currentX","currentY","push","horizontalFirst","random","Room","DungeonGenerator","rooms","corridors","grid","Array","fill","map","generate","_this","generateRooms","connectRooms","applyToGrid","attempts","arguments","length","undefined","i","minSize","maxSize","newRoom","overlaps","_iterator","_createForOfIteratorHelper","_step","s","n","done","room","intersects","err","e","f","_this2","sortedRooms","_toConsumableArray","sort","a","b","roomA","roomB","connection","findBestConnection","corridor","doorPoints","forEach","point","_this3","strategies","dx","dy","_i","_strategies","_strategies$_i","startPoint","findConnectionPoint","endPoint","filter","isPointInAnyRoom","isValidCorridor","getDoorPoints","targetRoom","offsetX","offsetY","roomCenter","getCenter","targetCenter","_iterator2","_step2","neighbors","getAdjacentPoints","_iterator3","_step3","neighbor","findDoorPlacementPoints","startSegment","slice","validStart","isValidDoorPlacement","endSegment","validEnd","findClosestDoorPoint","centerA","centerB","some","deltas","_i2","_deltas","_deltas$_i","_slicedToArray","isInBounds","start","end","isAdjacentToRoom","neighboringCells","corridorNeighbors","cell","p","assignRoomTypes","setType","RoomType","LARGE_HALL","topLeftRoom","reduce","closest","distance","sqrt","ENTRANCE","farthestRoom","farthest","pow","BOSS","remainingTypes","STORAGE","TREASURE","STANDARD","randomType","_iterator4","_step4","_iterator5","_step5","_iterator6","_step6","tempGrid","row","hasAdjacentFloor","console","log","placeDoors","_iterator7","_step7","startSection","endSection","_i3","_arr","concat","shouldPlaceDoor","horizontalDoor","verticalDoor","ny","nx","doors","features","Map","isLocked","requiredKey","contents","Set","other","padding","getBounds","left","right","top","bottom","addDoor","getMinSize","availableWidth","availableHeight","RoomColors","_defineProperty","GridCell","walkable","transparent","visible","explored","entities","properties","isDoor","isOpen","addEntity","entity","add","removeEntity","hasBlockingEntity","from","blocking","setProperty","set","getProperty","get","hasProperty","has","warn","toggleDoor","GridManager","createGrid","getCell","canMoveTo","gridToScreen","gridX","gridY","screenToGrid","getNeighbors","includeDiagonals","directions","_directions","dir","newX","newY","getWalkableNeighbors","hasLineOfSight","x1","y1","x2","y2","abs","sx","sy","e2","getCellsInRange","centerX","centerY","range","cells","resetVisibility","clear","GameManager","canvas","document","getElementById","Error","ctx","getContext","GRID_WIDTH","GRID_HEIGHT","TILE_SIZE","camera","imageSmoothingEnabled","gridManager","dungeonGenerator","roomTypes","lastFrameTime","frameCount","playerPos","playerFacing","generateNewDungeon","handleKeyDown","bind","window","addEventListener","event","code","preventDefault","addLegend","gameLoop","loadingScreen","classList","addInstructions","error","legend","createElement","style","position","color","fontFamily","fontSize","backgroundColor","borderRadius","legendHTML","Object","entries","_ref","_ref2","charAt","toLowerCase","replace","door","closed","open","innerHTML","appendChild","dungeon","placePlayerInDungeon","updateVisibility","visibleCells","instructions","tryToggleDoorInFacingDirection","newFacingX","newFacingY","facingX","facingY","facingCell","renderGrid","_this$gridManager","fillColor","roomType","wall","fillStyle","fillRect","strokeStyle","strokeRect","renderPlayer","indicatorSize","indicatorX","indicatorY","beginPath","arc","PI","timestamp","deltaTime","font","fillText","round","requestAnimationFrame","game"],"sourceRoot":""}